{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formEl = document.querySelector('.form');\nconst inputEl = document.querySelector('input');\nconst gallery = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('body>span');\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nfunction loaderDisplayStatus(status = 'none') {\n  loaderEl.style.display = status;\n}\n\nconst params = {\n  key: '41531560-af55148938f1784ffe04592f4',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nconst galleryImg = new SimpleLightbox('.gallery a', {\n  nav: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  loaderDisplayStatus();\n});\n\nfunction getPicture(searchParams) {\n  return fetch(`${BASE_URL}?${new URLSearchParams(searchParams)}`)\n    .then(response => {\n      if (!response.ok) {\n        loaderDisplayStatus();\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(({ hits }) => {\n      if (hits.length > 0) {\n        loaderDisplayStatus();\n        gallery.innerHTML = renderImages(hits);\n        galleryImg.refresh();\n      } else {\n        iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loaderDisplayStatus();\n      }\n    })\n    .catch(e => {\n      console.log(e);\n    })\n    .finally(() => {\n      formEl.reset();\n    });\n}\n\nformEl.addEventListener('submit', e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  loaderDisplayStatus('block');\n  params.q = e.target.elements.search.value.trim();\n  getPicture(params);\n});\n\nfunction renderImages(listImages) {\n  return listImages.reduce(\n    (acc, image) =>\n      acc +\n      `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n      />\n    </a>\n    <div class=\"info-img\">\n    <p>Likes<span>${image.likes}</span></p>\n    <p>Views<span>${image.views}</span></p>\n    <p>Comments<span>${image.comments}</span></p>\n    <p>Downloads<span>${image.downloads}</span></p>\n    </div>\n  </li>`,\n    ''\n  );\n}\n"],"names":["formEl","gallery","loaderEl","BASE_URL","loaderDisplayStatus","status","params","galleryImg","SimpleLightbox","getPicture","searchParams","response","hits","renderImages","iziToast","e","listImages","acc","image"],"mappings":"6vBAKA,MAAMA,EAAS,SAAS,cAAc,OAAO,EAC7B,SAAS,cAAc,OAAO,EAC9C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,SAAS,cAAc,WAAW,EAE7CC,EAAW,2BAEjB,SAASC,EAAoBC,EAAS,OAAQ,CAC5CH,EAAS,MAAM,QAAUG,CAC3B,CAEA,MAAMC,EAAS,CACb,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEMC,EAAa,IAAIC,EAAe,aAAc,CAClD,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACZ,CAAC,EAED,SAAS,iBAAiB,mBAAoB,IAAM,CAClDJ,GACF,CAAC,EAED,SAASK,EAAWC,EAAc,CAChC,OAAO,MAAM,GAAGP,KAAY,IAAI,gBAAgBO,CAAY,GAAG,EAC5D,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAAP,IACM,IAAI,MAAMO,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAK,CAAC,CAAE,KAAAC,KAAW,CACdA,EAAK,OAAS,GAChBR,IACAH,EAAQ,UAAYY,EAAaD,CAAI,EACrCL,EAAW,QAAO,IAElBO,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACZ,CAAS,EACDV,IAER,CAAK,EACA,MAAMW,GAAK,CACV,QAAQ,IAAIA,CAAC,CACnB,CAAK,EACA,QAAQ,IAAM,CACbf,EAAO,MAAK,CAClB,CAAK,CACL,CAEAA,EAAO,iBAAiB,SAAUe,GAAK,CACrCA,EAAE,eAAc,EAChBd,EAAQ,UAAY,GACpBG,EAAoB,OAAO,EAC3BE,EAAO,EAAIS,EAAE,OAAO,SAAS,OAAO,MAAM,OAC1CN,EAAWH,CAAM,CACnB,CAAC,EAED,SAASO,EAAaG,EAAY,CAChC,OAAOA,EAAW,OAChB,CAACC,EAAKC,IACJD,EACA;AAAA,oCAC8BC,EAAM;AAAA;AAAA;AAAA,eAG3BA,EAAM;AAAA,eACNA,EAAM;AAAA;AAAA;AAAA;AAAA,oBAIDA,EAAM;AAAA,oBACNA,EAAM;AAAA,uBACHA,EAAM;AAAA,wBACLA,EAAM;AAAA;AAAA,SAG1B,EACJ,CACA"}